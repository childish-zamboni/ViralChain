(function(t){function e(e){for(var s,a,r=e[0],u=e[1],l=e[2],d=0,f=[];d<r.length;d++)a=r[d],i[a]&&f.push(i[a][0]),i[a]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);c&&c(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,r=1;r<n.length;r++){var u=n[r];0!==i[u]&&(s=!1)}s&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var s={},i={app:0},o=[];function a(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=s,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(n,s,function(e){return t[e]}.bind(null,s));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var c=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"127e":function(t,e,n){"use strict";var s=n("a1a6"),i=n.n(s);i.a},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},o=[],a={name:"App"},r=a,u=(n("127e"),n("2877")),l=Object(u["a"])(r,i,o,!1,null,null,null),c=l.exports,d=n("8c4f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.userSession.isUserSignedIn()?t._e():n("landing"),t.user?n("dashboard",{attrs:{user:t.user}}):t._e()],1)},p=[],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("div",[t._m(0),t._m(1),n("button",{staticClass:"btn btn-default bg-white",on:{click:function(e){return e.preventDefault(),t.signIn(e)}}},[t._v("Sign In With Blockstack")])])])},h=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h1",[t._v("ViralChain "),s("img",{attrs:{height:"80",src:n("cf05")}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("A decentralized news network built on "),n("a",{attrs:{href:"https://blockstack.org",target:"_blank"}},[t._v("Blockstack")])])}],m=n("e4d3"),w=new m["AppConfig"](["store_write","publish_data"]),g=new m["UserSession"]({appConfig:w});window.userSession=g;var b={name:"landing",methods:{signIn:function(){g.redirectToSignIn()}}},_=b,y=(n("7e3a"),Object(u["a"])(_,v,h,!1,null,"75782574",null)),C=y.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row justify-content-md-center"},[n("div",{staticClass:"col-md-8 col-md-offset-2"},[n("h1",{staticClass:"page-header align-middle"},[t._v("ViralChain\n          "),n("img",{staticClass:"avatar",attrs:{src:t.user.avatarUrl()?t.user.avatarUrl():"/avatar-placeholder.png"}}),n("small",[n("span",{staticClass:"sign-out"},[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("Sign Out")])])])]),n("h2",{staticClass:"user-info"},[n("small",[t._v("\n            "+t._s(t.user.name()?t.user.name():"Nameless Person")+"'s Profile\n          ")]),n("small",{staticClass:"float-right"},[t._v("\n          "+t._s(t.user.username?t.user.username:t.user.identityAddress)+"\n          ")])]),n("transition",{attrs:{name:"fade"}},[n("form",{directives:[{name:"show",rawName:"v-show",value:t.writing,expression:"writing"}],attrs:{disabled:!t.todo||!t.title},on:{submit:function(e){return e.preventDefault(),t.addTodo(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Title",autofocus:""},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),n("br"),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.todo,expression:"todo"}],staticStyle:{width:"100%"},attrs:{type:"text",rows:"12",autofocus:"",placeholder:"Write your article here..."},domProps:{value:t.todo},on:{input:function(e){e.target.composing||(t.todo=e.target.value)}}}),n("br"),n("br"),n("span",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn btn-default bg-light",attrs:{type:"submit",disabled:!t.todo||!t.title}},[t._v("Publish")]),n("a",{staticClass:"float-right",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.writing=!1}}},[t._v("Cancel")])])])]),t.writing?t._e():n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.writing=!0}}},[t._v("Write a new article ✏️")]),n("br"),n("br"),n("br"),n("ul",{staticClass:"list-group"},[n("p",[n("span",{staticStyle:{"text-decoration":"underline"}},[t._v("Your articles")]),t._v(" \n            "),t.articles?t._e():n("a",{staticStyle:{"text-decoration":"none!important"},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.articles=!0}}},[t._v("➕")]),t.articles?n("a",{staticStyle:{"text-decoration":"none!important"},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.articles=!1}}},[t._v("➖")]):t._e(),n("span",{directives:[{name:"show",rawName:"v-show",value:t.articles,expression:"articles"}],staticClass:"float-right"},[t._v("Delete 🗑")])]),t._l(t.todos,function(e){return"news"===e.type&&!0===t.articles?n("li",{key:e.id,staticClass:"list-group-item",class:{completed:e.completed}},[n("label",{staticStyle:{"text-decoration":"underline"},on:{click:function(n){return n.preventDefault(),t.showNews(e)}}},[t._v("\n              "+t._s(e.title)+" ("+t._s(e.upvotes.length-e.downvotes.length)+" point"),n("span",{directives:[{name:"show",rawName:"v-show",value:e.upvotes.length-e.downvotes.length!=1,expression:"todo.upvotes.length-todo.downvotes.length!=1"}]},[t._v("s")]),t._v(")\n            ")]),n("a",{staticClass:"delete float-right",attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.todos.splice(t.todos.indexOf(e),1)}}},[t._v("X")])]):t._e()})],2),n("br"),n("br"),n("ul",{staticClass:"list-group"},[n("p",[n("span",{staticStyle:{"text-decoration":"underline"}},[t._v("Your feed")]),t._v(" \n            "),t.feed?t._e():n("a",{staticStyle:{"text-decoration":"none!important"},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.feed=!0}}},[t._v("➕")]),t.feed?n("a",{staticStyle:{"text-decoration":"none!important"},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.feed=!1}}},[t._v("➖")]):t._e(),n("a",{staticClass:"float-right",staticStyle:{"text-decoration":"none!important"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.loadFeed(e)}}},[t._v("Refresh ⟲")])]),t._l(t.todosFeed,function(e){return"news"===e.type&&!0===t.feed?n("li",{key:e.id,staticClass:"list-group-item",class:{completed:e.completed}},[n("label",{staticStyle:{"text-decoration":"underline"},on:{click:function(n){return n.preventDefault(),t.showNews(e)}}},[t._v("\n              "+t._s(e.title)+" ("+t._s(e.upvotes.length-e.downvotes.length)+" point"),n("span",{directives:[{name:"show",rawName:"v-show",value:e.upvotes.length-e.downvotes.length!=1,expression:"todo.upvotes.length-todo.downvotes.length!=1"}]},[t._v("s")]),t._v(")\n            ")])]):t._e()})],2),n("br"),n("br"),n("form",{attrs:{disabled:!t.subUsername},on:{submit:function(e){return e.preventDefault(),t.addSubscription(e)}}},[n("p",{staticStyle:{"font-style":"italic"}},[t._v("Subscribe to a user:")]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.subUsername,expression:"subUsername"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Username",autofocus:""},domProps:{value:t.subUsername},on:{input:function(e){e.target.composing||(t.subUsername=e.target.value)}}}),n("span",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn btn-default bg-light",attrs:{type:"submit",disabled:!t.subUsername}},[t._v("Add subscription")])])])])],1)])]),n("transition",{attrs:{name:"fade"}},[t.showModal?n("modal",[n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-container"},[n("div",{staticClass:"modal-header"},[n("p",[n("span",{staticStyle:{"text-decoration":"underline"}},[t._v(t._s(t.viewing.title))]),t._v(" by "),n("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.viewing.author))])]),n("button",{staticClass:"modal-default-button",on:{click:function(e){t.showModal=!1}}},[t._v("\n            Close\n          ")])]),n("div",{staticClass:"modal-body"},[t._v("\n          "+t._s(t.viewing.text)+"\n        ")]),n("div",{staticClass:"modal-footer"},[n("p",{staticStyle:{width:"100%"}},[n("span",{staticClass:"float-left"},[t._v("Points: "+t._s(t.viewing.upvotes.length-t.viewing.downvotes.length))]),t.feedNews?t._e():n("span",{staticClass:"float-right"},[t.viewing.upvotes.includes(t.user.username)?t._e():n("a",{staticClass:"arrow",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.upvote(e)}}},[t._v("△")]),t.viewing.upvotes.includes(t.user.username)?n("a",{staticClass:"arrow",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.upvote(e)}}},[t._v("🔺")]):t._e(),t.viewing.downvotes.includes(t.user.username)?t._e():n("a",{staticClass:"arrow",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.downvote(e)}}},[t._v("▽")]),t.viewing.downvotes.includes(t.user.username)?n("a",{staticClass:"arrow",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.downvote(e)}}},[t._v("🔻")]):t._e()])])])])])])]):t._e()],1)],1)},k=[],S=(n("7f7f"),n("ac6a"),n("f499")),D=n.n(S),O="todos.json",U={name:"dashboard",props:["user"],data:function(){return{todos:[],todo:"",title:"",uidCount:0,writing:!1,showModal:!1,articles:!0,feed:!0,subUsername:"",todosFeed:[],feedNews:!1}},watch:{todos:{handler:function(t){return g.putFile(O,D()(t),{encrypt:!1})},deep:!0}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this,e=this;g.getFile(O,{decrypt:!1}).then(function(n){var s=JSON.parse(n||"[]");s.forEach(function(t,n){t.id=n,"subscription"===t.type&&Object(m["lookupProfile"])(t.subscription).then(function(t){var n=t.apps[window.location.href.substring(0,window.location.href.length-1)]+"todos.json";axios.get(n).then(function(t){e.todosFeed=e.todosFeed.concat(t.data)})}).catch(function(t){})}),t.uidCount=s.length,t.todos=s})},loadFeed:function(){var t=this;this.todosFeed=[];for(var e=0;e<this.todos.length;e++)"subscription"===this.todos[e].type&&Object(m["lookupProfile"])(this.todos[e].subscription).then(function(e){var n=e.apps[window.location.href.substring(0,window.location.href.length-1)]+"todos.json";axios.get(n).then(function(e){t.todosFeed=t.todosFeed.concat(e.data)})})},addTodo:function(){this.todo.trim()&&this.title.trim()&&(this.todos.unshift({id:this.uidCount++,text:this.todo,completed:!1,title:this.title,author:this.user.name(),upvotes:[this.user.username],downvotes:[],type:"news",authorID:this.user.username}),this.todo="",this.title="",this.writing=!1)},addSubscription:function(){if(this.subUsername.trim()){for(var t=0;t<this.todos.length;t++)if("subscription"===this.todos[t].type&&this.todos[t].subscription===this.subUsername)return;this.todos.unshift({id:this.uidCount++,subscription:this.subUsername,type:"subscription"}),this.loadFeed(),this.subUsername=""}},signOut:function(){g.signUserOut(window.location.href)},showNews:function(t){t.authorID===this.user.username?this.feedNews=!1:this.feedNews=!0,this.viewing=t,t.completed=!0,this.showModal=!0},upvote:function(){var t=this.viewing.upvotes.indexOf(this.user.username),e=this.viewing.downvotes.indexOf(this.user.username);-1===t?(this.viewing.upvotes.push(this.user.username),-1!=e&&this.viewing.downvotes.splice(e,1)):this.viewing.upvotes.splice(t,1)},downvote:function(){var t=this.viewing.downvotes.indexOf(this.user.username),e=this.viewing.upvotes.indexOf(this.user.username);-1===t?(this.viewing.downvotes.push(this.user.username),-1!=e&&this.viewing.upvotes.splice(e,1)):this.viewing.downvotes.splice(t,1)}}},j=U,P=(n("7ff7"),Object(u["a"])(j,x,k,!1,null,"6f6f8055",null)),N=P.exports,F={name:"Home",components:{Landing:C,Dashboard:N},created:function(){this.userSession=g},mounted:function(){g.isUserSignedIn()?(this.userData=g.loadUserData(),this.user=new m["Person"](this.userData.profile),this.user.username=this.userData.username):g.isSignInPending()&&g.handlePendingSignIn().then(function(t){window.location=window.location.origin})},data:function(){return{userSession:null,user:null}}},I=F,M=Object(u["a"])(I,f,p,!1,null,null,null),E=M.exports;s["a"].use(d["a"]);var T=new d["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:E}]});window.blockstack=n("e4d3"),window.axios=n("bc3a"),s["a"].config.productionTip=!1,new s["a"]({router:T,render:function(t){return t(c)}}).$mount("#app")},6:function(t,e){},"61d0":function(t,e,n){},7:function(t,e){},"7e3a":function(t,e,n){"use strict";var s=n("61d0"),i=n.n(s);i.a},"7ff7":function(t,e,n){"use strict";var s=n("b897"),i=n.n(s);i.a},a1a6:function(t,e,n){},b897:function(t,e,n){},cf05:function(t,e,n){t.exports=n.p+"img/logo.38e4cc86.png"}});
//# sourceMappingURL=app.98073bd3.js.map